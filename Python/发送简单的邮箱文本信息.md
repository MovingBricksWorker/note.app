ç¯å¢ƒä¸º: MacOS python3

**ç®€æ˜“ç‰ˆ**
ä¸å¤Ÿçµæ´» ä¸€æ¬¡æ€§ä»£ç 
```py
#! python3
# coding:utf-8

import smtplib
from email.header import Header
from email.mime.text import MIMEText

def sendMail(targetMaillist):
    mailBody = 'ä½ å¥½ï¼Œè¿™æ˜¯é‚®ä»¶å‘é€æµ‹è¯•!!! è¿™æ˜¯è’²å…¬è‹±çš„åœ°å€: https://www.pgyer.com/xxxx..'
    # ç”³æ˜é‚®ä»¶å¯¹è±¡ htmlæ–‡æœ¬ä¿¡æ¯
    msg = MIMEText(mailBody, 'html', 'utf-8')
    # é‚®ä»¶ä¸»é¢˜
    msg['subject'] = Header('iOSè‡ªåŠ¨æ‰“åŒ…é‚®ä»¶åˆ†å‘', 'utf-8')
    msg['From'] = 'CoderWGB<CoderWGB@163.com>'

    # SMTPæœåŠ¡å¯¹è±¡
    smtpMail = smtplib.SMTP()

    # è¿æ¥SMTPæœåŠ¡å™¨ è¿™é‡Œä»¥ç½‘æ˜“163é‚®ç®±ä¸ºä¾‹ å…¶ä»–é‚®ç®±åº”è¯¥å·®ä¸å¤š
    smtpMail.connect('smtp.163.com')

    # ç™»å½•SMTPæœåŠ¡å™¨ ç™»å½•é‚®ç®± å¯†ç æ˜¯å®¢æˆ·ç«¯æˆæƒå¯†ç  ç½‘æ˜“è¿™ä¸ªé‚®ç®±æœ€å¤šå¯ä»¥æˆæƒäº”ä¸ªè®¾å¤‡
    smtpMail.login('xxx@163.com', 'XXXXX')

    # ä½¿ç”¨SMTPæœåŠ¡å™¨å‘é€é‚®ä»¶
    for tgmail in targetMaillist:
        msg['To'] = tgmail
        smtpMail.sendmail('xxx@163.com', tgmail, msg.as_string())
        #print('** é‚®ä»¶å‘é€æˆåŠŸï¼ **') #æ‰“å°æ˜¯è°ƒè¯•éœ€è¦ 
    smtpMail.quit()


# å‘é€é‚®ä»¶
# æ¥æ”¶é‚®ä»¶åˆ—è¡¨ æ•°é‡å¤šçš„è¯ æœ€å¥½æ˜¯è¯»å–æ–‡ä»¶è·å– 
targetMaillist = ['9xxxx2@qq.com', '1024xxx@qq.com']
sendMail(targetMaillist)
```


**è¿›é˜¶ç‰ˆ**
é…åˆshellä¼ å‚,æ›´çµæ´»ä¸€äº›,å¯ä»¥è‡ªå®šä¹‰å†…å®¹å’Œæ”¶ä»¶äºº
```py
#! python3
# coding:utf-8

import smtplib
from email.header import Header
from email.mime.text import MIMEText
import sys


#å‘é€é‚®ä»¶æ–‡æœ¬æ¶ˆæ¯ 
# å‚æ•°1: æ”¶ä»¶äººåˆ—è¡¨
# å‚æ•°2: æ–‡æœ¬å†…å®¹
def sendMail(targetMaillist,mailBody):
    # ç”³æ˜é‚®ä»¶å¯¹è±¡
    msg = MIMEText(mailBody, 'html', 'utf-8')
    # é‚®ä»¶ä¸»é¢˜
    msg['subject'] = Header('æ¥è‡ªè„šæœ¬è‡ªåŠ¨å‘é€', 'utf-8') #ä¸»é¢˜èƒ½å¤–éƒ¨è®¾ç½®çš„è¯æœ€å¥½äº†
    msg['From'] = 'xxx<xxx@163.com>' #`æ˜µç§°<é‚®ç®±>`çš„å½¢å¼

    # SMTPæœåŠ¡å¯¹è±¡
    smtpMail = smtplib.SMTP()

    # è¿æ¥SMTPæœåŠ¡å™¨
    smtpMail.connect('smtp.163.com')

    # ç™»å½•SMTPæœåŠ¡å™¨
    smtpMail.login('xxxx@163.com', 'CLYXQAxxxCHXFKR')

    # ä½¿ç”¨SMTPæœåŠ¡å™¨å‘é€é‚®ä»¶
    for tgmail in targetMaillist:
        msg['To'] = tgmail
        smtpMail.sendmail('xxxx@163.com', tgmail, msg.as_string())
        print('** (%s)å‘é€æˆåŠŸï¼ **' % tgmail)
    smtpMail.quit()

# è·å–å‘½ä»¤è¡Œå‚æ•°
args = sys.argv

# è¾“å‡ºç¨‹åºåç§°
# print("ç¨‹åºåç§°ï¼š", args[0])

# è¾“å‡ºå‘½ä»¤è¡Œå‚æ•°  å¤–éƒ¨ä¼ å‚ ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦åŒå¼•å·, ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯åŒå¼•å·å¼•èµ·æ¥é€—å·éš”å¼€
if len(args) > 1:
    print("é‚®ä»¶å†…å®¹ä¸ºï¼š", args[1])
# å‘é€é‚®ä»¶
# æ¥æ”¶é‚®ä»¶åˆ—è¡¨
    targetMaillist = ['8xxx2082@qq.com', '10247xxxx85@qq.com']
    if len(args) > 2:
        emailList = args[2].split(',') #å¤–éƒ¨ä¼ å‚é€—å·éš”å¼€
        targetMaillist += emailList

    print('æ”¶ä»¶é‚®ç®±åˆ—è¡¨å¦‚ä¸‹: ');
    print(targetMaillist)
    print('æ­£åœ¨å‘é€ä¸­...');
    sendMail(targetMaillist,args[1])
else:
    print("å‘½ä»¤è¡Œä¼ å‚é”™è¯¯")

```

## ç»ˆçº§ç‰ˆ

```py
#! python3
# coding:utf-8

import smtplib
from email.header import Header
from email.mime.text import MIMEText

# éœ€è¦å®‰è£…fire  `pip3 install fire`å³å¯
import fire


'''
python3 sendMessage.py --help

NAME
    sendMessage.py

SYNOPSIS
    sendMessage.py <flags>

FLAGS
    -t, --targetMaillist=TARGETMAILLIST
        Default: ['xxxx@qq.com']
        æ”¶ä»¶äººé‚®ç®±åˆ—è¡¨
    -s, --subject=SUBJECT
        Default: 'æ¥è‡ªCoderWGBçš„é—®å€™'
        é‚®ç®±ä¸»é¢˜
    -m, --mailBody=MAILBODY
        Default: 'ä½ æœ€è¿‘è¿‡å¾—å¥½å—'
        é‚®ä»¶æ–‡æœ¬å†…å®¹

 å°è£…æˆshellå‘½ä»¤è¿›è¡Œè°ƒç”¨   python3 sendMessage.py -t  "['xxx@qq.com','xxxx@qq.com']" -s "ä¸€å°é—®å€™é‚®ä»¶" -m "å‡è£…è¿™æ˜¯ä¸€å°æƒ…ä¹¦ğŸ’Œ"
'''


#å‘é€é‚®ä»¶æ–‡æœ¬æ¶ˆæ¯ 
# å‚æ•°1: æ”¶ä»¶äººåˆ—è¡¨
# å‚æ•°2: æ–‡æœ¬å†…å®¹
def sendMail(targetMaillist = ['xxx@qq.com'], subject = 'æ¥è‡ªCoderWGBçš„é—®å€™', mailBody = "ä½ æœ€è¿‘è¿‡å¾—å¥½å—"):
    '''
    :param targetMaillist: æ”¶ä»¶äººé‚®ç®±åˆ—è¡¨
    :param subject: é‚®ç®±ä¸»é¢˜
    :param mailBody: é‚®ä»¶æ–‡æœ¬å†…å®¹
    :return:
    '''
    
    # ç”³æ˜é‚®ä»¶å¯¹è±¡
    msg = MIMEText(mailBody, 'html', 'utf-8')
    # é‚®ä»¶ä¸»é¢˜
    msg['subject'] = Header(subject, 'utf-8')
    msg['From'] = 'CoderWGB<xxx@163.com>'

    # SMTPæœåŠ¡å¯¹è±¡
    smtpMail = smtplib.SMTP()

    # è¿æ¥SMTPæœåŠ¡å™¨
    smtpMail.connect('smtp.163.com')

    # ç™»å½•SMTPæœåŠ¡å™¨
    smtpMail.login('xxx@163.com', 'CxxxKR')

    # ä½¿ç”¨SMTPæœåŠ¡å™¨å‘é€é‚®ä»¶
    for tgmail in targetMaillist:
        msg['To'] = tgmail
        smtpMail.sendmail('xxx@163.com', tgmail, msg.as_string())
        print('** (%s)å‘é€æˆåŠŸï¼ **' % tgmail)
    smtpMail.quit()


if __name__ == '__main__':
    fire.Fire(sendMail)

```
