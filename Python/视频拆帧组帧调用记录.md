æ­£å¥½è¿‘æœŸæœ‰ä¸€ä¸ªè§†é¢‘æ‹†å¸§çš„éœ€æ±‚,ç½‘ä¸Šæœäº†ä¸€åœˆ,è¿˜æ˜¯æœ‰ä¸å°‘è½®å­çš„,C++å’ŒPythonä¸¤ç§é€‰å‹çš„è¯,æˆ‘æ›´å€¾å‘äºPython,å› ä¸ºçœäº‹,ç¯å¢ƒè‡ªå¸¦,å®‰è£…å‡ ä¸ªåº“è°ƒç”¨å³å¯


> å‚è€ƒäº†å¼€æºé¡¹ç›®  https://github.com/exmee/Image_processing
>
> åœ¨æ­¤åŸºç¡€ä¸Šæ”¹äº†æ”¹,æŠŠå‚æ•°æš´éœ²å‡ºæ¥è°ƒç”¨

å®‰è£…ä¾èµ–åº“

`opencv-python` ,`pillow`, `image`, `scikit-image`,`imutils`

```shell
#ä½¿ç”¨Python3 å›½å†…èµ°é˜¿é‡Œäº‘é•œåƒä¸‹è½½
python3 -m pip  install -i https://mirrors.aliyun.com/pypi/simple/ opencv-python

python3 -m pip  install -i https://mirrors.aliyun.com/pypi/simple/ pillow

python3 -m pip  install -i https://mirrors.aliyun.com/pypi/simple/ image

python3 -m pip  install -i https://mirrors.aliyun.com/pypi/simple/ scikit-image

python3 -m pip  install -i https://mirrors.aliyun.com/pypi/simple/ imutils

```



æ‹†å¸§(è§†é¢‘æ‹†åˆ†ä¸ºä¸€å¼ å¼ å›¾ç‰‡)

```python
import cv2
import os
import argparse
import time

def video2frame(videos_path, frames_save_path, time_interval):
    '''
    :param videos_path: è§†é¢‘çš„å­˜æ”¾è·¯å¾„
    :param frames_save_path: è§†é¢‘åˆ‡åˆ†æˆå¸§ä¹‹åå›¾ç‰‡çš„ä¿å­˜è·¯å¾„
    :param time_interval: ä¿å­˜é—´éš”
    :return:
    '''
    vidcap = cv2.VideoCapture(videos_path)
    success, image = vidcap.read()
    count = 0
    start = time.time()
    while success:
        success, image = vidcap.read()
        count += 1
        if image is not None:
            if count % time_interval == 0:
                cv2.imencode('.jpg', image)[1].tofile(frames_save_path + "/frame%d.jpg" % (count/time_interval))
    print("æ‹†å¸§å®Œæ¯•,ä¸€å…±ç”Ÿæˆ " + str(int((count-1)/time_interval)) + " å¼ å›¾ç‰‡")
    print("æ‹†å¸§æ€»è€—æ—¶: %.2fç§’" % (time.time() - start))
    print("æ‹†å¸§å¹³å‡è€—æ—¶: %fç§’/å¼ å›¾ç‰‡" % ((time.time() - start)/float((count-1)/time_interval)))
    os.system('open ' + str(frames_save_path))

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('-v','--video_path', required=True,help="è®¾ç½®è¾“å…¥è§†é¢‘çš„è·¯å¾„")
    parser.add_argument('-i','--images_path', required=True,help="è®¾ç½®è¾“å…¥å›¾ç‰‡çš„è·¯å¾„")
    args = parser.parse_args()
    videos_path = args.video_path
    frames_save_path = args.images_path
    if not os.path.exists(frames_save_path):
        os.makedirs(frames_save_path)
    time_interval = 1  # éš”ä¸€å¸§ä¿å­˜ä¸€æ¬¡
    video2frame(videos_path, frames_save_path, time_interval)

# è°ƒç”¨ç¤ºä¾‹ python3 video2frame.py -v '/Users/wangguibin/Desktop/mmas.flv' -i '/Users/wangguibin/Desktop/images'

```
pythonå‘½ä»¤è¡Œå·¥å…·çš„è¯,å»ºè®®ä½¿ç”¨fireåº“
`pip3 install fire`å³å¯
å®šä¹‰å¥½å‡½æ•°å’Œå…¥å‚,ç¼–å†™å¥½æ–‡æ¡£,ç”Ÿæˆçš„å‘½ä»¤è¡Œå·¥å…·è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ‰‹å†Œ
ä¾‹å­å¦‚ä¸‹: 
```python
import cv2
import os
import fire
import time

def video2frame(videos_path, frames_save_path, time_interval = 1):
    '''
    :param videos_path: è§†é¢‘çš„å­˜æ”¾è·¯å¾„
    :param frames_save_path: è§†é¢‘åˆ‡åˆ†æˆå¸§ä¹‹åå›¾ç‰‡çš„ä¿å­˜è·¯å¾„
    :param time_interval: ä¿å­˜é—´éš”
    :return:
    '''
    if not os.path.exists(frames_save_path):
        os.makedirs(frames_save_path)
    vidcap = cv2.VideoCapture(videos_path)
    success, image = vidcap.read()
    count = 0
    start = time.time()
    while success:
        success, image = vidcap.read()
        count += 1
        if image is not None:
            if count % time_interval == 0:
                cv2.imencode('.jpg', image)[1].tofile(frames_save_path + "/frame%d.jpg" % (count/time_interval))
    print("æ‹†å¸§å®Œæ¯•,ä¸€å…±ç”Ÿæˆ " + str(int((count-1)/time_interval)) + " å¼ å›¾ç‰‡")
    print("æ‹†å¸§æ€»è€—æ—¶: %.2fç§’" % (time.time() - start))
    print("æ‹†å¸§å¹³å‡è€—æ—¶: %fç§’/å¼ å›¾ç‰‡" % ((time.time() - start)/float((count-1)/time_interval)))
    os.system('open ' + str(frames_save_path))

if __name__ == '__main__':
    #ä½¿ç”¨fireå¯ä»¥çœå»è§£æå‚æ•°çš„è¿‡ç¨‹ä»¥åŠä¼šè‡ªåŠ¨ç”Ÿæˆå‘½ä»¤è¡Œå‚æ•°æ–‡æ¡£
    # pip3 install fire å³å¯å®‰è£…
    fire.Fire(video2frame)
# è°ƒç”¨:
# python3 video2frame_fire.py  1.flv ./flv2images --time_interval 1
#æ‹†å¸§å®Œæ¯•,ä¸€å…±ç”Ÿæˆ 680 å¼ å›¾ç‰‡
#æ‹†å¸§æ€»è€—æ—¶: 3.66ç§’
#æ‹†å¸§å¹³å‡è€—æ—¶: 0.005386ç§’/å¼ å›¾ç‰‡
```


ç»„å¸§(å›¾ç‰‡åˆæˆè§†é¢‘)

```python
import cv2
import os
import numpy as np
from PIL import Image
import re
import argparse


re_digits = re.compile(r'(\d+)')

def emb_numbers(s):
    pieces=re_digits.split(s)
    pieces[1::2]=map(int,pieces[1::2])
    return pieces

def sort_strings_with_emb_numbers2(alist):
    return sorted(alist, key=emb_numbers)

def frame2video(im_dir, video_dir, fps):
    im_list = os.listdir(im_dir)
    im_list = sort_strings_with_emb_numbers2(im_list)
    #im_list.sort(key=lambda x: int(x.replace("frame", "").split('.')[0]))  # æœ€å¥½å†çœ‹çœ‹å›¾ç‰‡é¡ºåºå¯¹ä¸
    img = Image.open(os.path.join(im_dir, im_list[0]))
    img_size = img.size  # è·å¾—å›¾ç‰‡åˆ†è¾¨ç‡ï¼Œim_diræ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡åˆ†è¾¨ç‡éœ€è¦ä¸€è‡´

    #fourcc = cv2.cv.CV_FOURCC('M','J','P','G') #opencvç‰ˆæœ¬æ˜¯2
    fourcc = cv2.VideoWriter_fourcc(*'XVID')  # opencvç‰ˆæœ¬æ˜¯3
    videoWriter = cv2.VideoWriter(video_dir, fourcc, fps, img_size)
    # count = 1
    for i in im_list:
        im_name = os.path.join(im_dir + i)
        frame = cv2.imdecode(np.fromfile(im_name, dtype=np.uint8), -1)
        videoWriter.write(frame)
        # count+=1
        # if (count == 200):
        #     print(im_name)
        #     break
    videoWriter.release()
    print('finish')


if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('-i','--im_dir', required=True,help="è®¾ç½®è§†é¢‘å¸§å›¾ç‰‡ç›®å½•")
    parser.add_argument('-v','--video_dir', required=True,help="è®¾ç½®è¾“å‡ºè§†é¢‘çš„è·¯å¾„")
    parser.add_argument('-f','--fps', type=int,default=30,help="è®¾ç½®è¾“å‡ºè§†é¢‘çš„è·¯å¾„")

    args = parser.parse_args()
    im_dir = args.im_dir
    video_dir = args.video_dir    
    fps = args.fps  # å¸§ç‡ï¼Œæ¯ç§’é’Ÿå¸§æ•°è¶Šå¤šï¼Œæ‰€æ˜¾ç¤ºçš„åŠ¨ä½œå°±ä¼šè¶Šæµç•…
    frame2video(im_dir, video_dir, fps)
    # è°ƒç”¨ç¤ºä¾‹ python3 frame2video.py -f 25 -i '/Users/wangguibin/Desktop/images/' -v '/Users/wangguibin/Desktop/test.mp4' 
```

å›¾ç‰‡æ¨¡ç³Šæ£€æµ‹(æŠ½æ£€)

```python
# -*-coding=UTF-8-*-
"""
åœ¨æ— å‚è€ƒå›¾ä¸‹ï¼Œæ£€æµ‹å›¾ç‰‡è´¨é‡çš„æ–¹æ³•
"""
import os
import cv2
import argparse

import numpy as np
from skimage import filters

class BlurDetection:
    def __init__(self, strDir):
        print("å›¾ç‰‡æ£€æµ‹å¯¹è±¡å·²ç»åˆ›å»º...")
        self.strDir = strDir

    def _getAllImg(self, strType='jpg'):
        """
        æ ¹æ®ç›®å½•è¯»å–æ‰€æœ‰çš„å›¾ç‰‡
        :param strType: å›¾ç‰‡çš„ç±»å‹
        :return:  å›¾ç‰‡åˆ—è¡¨
        """
        names = []
        for root, dirs, files in os.walk(self.strDir):  # æ­¤å¤„æœ‰bug  å¦‚æœè°ƒè¯•çš„æ•°æ®è¿˜æ”¾åœ¨è¿™é‡Œï¼Œå°†ä¼šé€’å½’çš„éå†æ‰€æœ‰æ–‡ä»¶
            for file in files:
                # if os.path.splitext(file)[1]=='jpg':
                names.append(str(file))
        return names

    def _imageToMatrix(self, image):
        """
        æ ¹æ®åç§°è¯»å–å›¾ç‰‡å¯¹è±¡è½¬åŒ–çŸ©é˜µ
        :param strName:
        :return: è¿”å›çŸ©é˜µ
        """
        imgMat = np.matrix(image)
        return imgMat

    def _blurDetection(self, imgName):

        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        imgMat=self._imageToMatrix(img2gray)/255.0
        x, y = imgMat.shape
        score = 0
        for i in range(x - 2):
            for j in range(y - 2):
                score += (imgMat[i + 2, j] - imgMat[i, j]) ** 2
        # step3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†
        score=score/10
        newImg = self._drawImgFonts(reImg, str(score))
        newDir = self.strDir + "/_blurDetection_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return score

    def _SMDDetection(self, imgName):

        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        f=self._imageToMatrix(img2gray)/255.0
        x, y = f.shape
        score = 0
        for i in range(x - 1):
            for j in range(y - 1):
                score += np.abs(f[i+1,j]-f[i,j])+np.abs(f[i,j]-f[i+1,j])
        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†
        score=score/100
        newImg = self._drawImgFonts(reImg, str(score))
        newDir = self.strDir + "/_SMDDetection_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return score

    def _SMD2Detection(self, imgName):
        """
        ç°åº¦æ–¹å·®ä¹˜ç§¯
        :param imgName:
        :return:
        """
        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        f=self._imageToMatrix(img2gray)/255.0
        x, y = f.shape
        score = 0
        for i in range(x - 1):
            for j in range(y - 1):
                score += np.abs(f[i+1,j]-f[i,j])*np.abs(f[i,j]-f[i,j+1])
        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†
        score=score
        newImg = self._drawImgFonts(reImg, str(score))
        newDir = self.strDir + "/_SMD2Detection_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return score
    def _Variance(self, imgName):
        """
               ç°åº¦æ–¹å·®ä¹˜ç§¯
               :param imgName:
               :return:
               """
        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        f = self._imageToMatrix(img2gray)

        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†
        score = np.var(f)
        newImg = self._drawImgFonts(reImg, str(score))
        newDir = self.strDir + "/_Variance_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return score
    def _Vollath(self,imgName):
        """
                       ç°åº¦æ–¹å·®ä¹˜ç§¯
                       :param imgName:
                       :return:
                       """
        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        f = self._imageToMatrix(img2gray)
        source=0
        x,y=f.shape
        for i in range(x-1):
            for j in range(y):
                source+=f[i,j]*f[i+1,j]
        source=source-x*y*np.mean(f)
        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†

        newImg = self._drawImgFonts(reImg, str(source))
        newDir = self.strDir + "/_Vollath_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return source
    def _Tenengrad(self,imgName):
        """
                       ç°åº¦æ–¹å·®ä¹˜ç§¯
                       :param imgName:
                       :return:
                       """
        # step 1 å›¾åƒçš„é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        f = self._imageToMatrix(img2gray)

        tmp = filters.sobel(f)
        source=np.sum(tmp**2)
        source=np.sqrt(source)
        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†

        newImg = self._drawImgFonts(reImg, str(source))
        newDir = self.strDir + "/_Tenengrad_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        cv2.waitKey(0)
        return source

    def Test_Tenengrad(self):
        imgList = self._getAllImg(self.strDir)
        for i in range(len(imgList)):
            score = self._Tenengrad(imgList[i])
            print(str(imgList[i]) + " is " + str(score))

    def Test_Vollath(self):
        imgList = self._getAllImg(self.strDir)
        for i in range(len(imgList)):
            score = self._Variance(imgList[i])
            print(str(imgList[i]) + " is " + str(score))


    def TestVariance(self):
        imgList = self._getAllImg(self.strDir)
        for i in range(len(imgList)):
            score = self._Variance(imgList[i])
            print(str(imgList[i]) + " is " + str(score))

    def TestSMD2(self):
        imgList = self._getAllImg(self.strDir)

        for i in range(len(imgList)):
            score = self._SMD2Detection(imgList[i])
            print(str(imgList[i]) + " is " + str(score))
        return
    def TestSMD(self):
        imgList = self._getAllImg(self.strDir)

        for i in range(len(imgList)):
            score = self._SMDDetection(imgList[i])
            print(str(imgList[i]) + " is " + str(score))
        return

    def TestBrener(self):
        imgList = self._getAllImg(self.strDir)

        for i in range(len(imgList)):
            score = self._blurDetection(imgList[i])
            print(str(imgList[i]) + " is " + str(score))
        return

    def preImgOps(self, imgName):
        """
        å›¾åƒçš„é¢„å¤„ç†æ“ä½œ
        :param imgName: å›¾åƒçš„è€Œæ˜æœ
        :return: ç°åº¦åŒ–å’Œresizeä¹‹åçš„å›¾ç‰‡å¯¹è±¡
        """
        strPath = self.strDir + imgName

        img = cv2.imread(strPath)  # è¯»å–å›¾ç‰‡
        cv2.moveWindow("", 1000, 100)
        # cv2.imshow("åŸå§‹å›¾", img)
        # é¢„å¤„ç†æ“ä½œ
        reImg = cv2.resize(img, (360, 640), interpolation=cv2.INTER_CUBIC)  #
        img2gray = cv2.cvtColor(reImg, cv2.COLOR_BGR2GRAY)  # å°†å›¾ç‰‡å‹ç¼©ä¸ºå•é€šé“çš„ç°åº¦å›¾
        return img2gray, reImg

    def _drawImgFonts(self, img, strContent):
        """
        ç»˜åˆ¶å›¾åƒ
        :param img: cvä¸‹çš„å›¾ç‰‡å¯¹è±¡
        :param strContent: ä¹¦å†™çš„å›¾ç‰‡å†…å®¹
        :return:
        """
        font = cv2.FONT_HERSHEY_SIMPLEX
        fontSize = 4
        # ç…§ç‰‡ æ·»åŠ çš„æ–‡å­—    /å·¦ä¸Šè§’åæ ‡   å­—ä½“   å­—ä½“å¤§å°   é¢œè‰²        å­—ä½“ç²—ç»†
        cv2.putText(img, strContent, (0, 200), font, fontSize, (0, 0, 255), 6)

        return img

    def _lapulaseDetection(self, imgName):
        """
        :param strdir: æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•
        :param name: æ–‡ä»¶åç§°
        :return: æ£€æµ‹æ¨¡ç³Šåçš„åˆ†æ•°
        """
        # step1: é¢„å¤„ç†
        img2gray, reImg = self.preImgOps(imgName)
        # step2: laplacianç®—å­ è·å–è¯„åˆ†
        resLap = cv2.Laplacian(img2gray, cv2.CV_64F)
        score = resLap.var()
        print("Laplacian %s score of given image is %s", str(score))
        # strp3: ç»˜åˆ¶å›¾ç‰‡å¹¶ä¿å­˜  ä¸åº”è¯¥å†™åœ¨è¿™é‡Œ  æŠ½è±¡å‡ºæ¥   è¿™æ˜¯å…±æœ‰çš„éƒ¨åˆ†
        newImg = self._drawImgFonts(reImg, str(score))
        newDir = self.strDir + "/_lapulaseDetection_/"
        if not os.path.exists(newDir):
            os.makedirs(newDir)
        newPath = newDir + imgName
        # æ˜¾ç¤º
        cv2.imwrite(newPath, newImg)  # ä¿å­˜å›¾ç‰‡
#        cv2.imshow(imgName, newImg)
#        k = cv2.waitKey(0) # waitkeyä»£è¡¨è¯»å–é”®ç›˜çš„è¾“å…¥ï¼Œæ‹¬å·é‡Œçš„æ•°å­—ä»£è¡¨ç­‰å¾…å¤šé•¿æ—¶é—´ï¼Œå•ä½msã€‚ 0ä»£è¡¨ä¸€ç›´ç­‰å¾…
#        if k ==27: # é”®ç›˜ä¸ŠEscé”®çš„é”®å€¼
#            cv2.destroyAllWindows()

        # step3: è¿”å›åˆ†æ•°
        return score

    def TestDect(self):
        names = self._getAllImg()
        for i in range(len(names)):
            score = self._lapulaseDetection(names[i])
            print(str(names[i]) + " is " + str(score))
        return


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument('-i','--images_path', required=True,help="è®¾ç½®è¾“å…¥å›¾ç‰‡çš„è·¯å¾„")
    args = parser.parse_args()

    BlurDetection = BlurDetection(strDir=images_path)
    BlurDetection.Test_Tenengrad () # æ£€æµ‹å›¾ç‰‡è´¨é‡

#è°ƒç”¨ç¤ºä¾‹ python3 blur_det.py -i "/Users/wangguibin/Desktop/images/"

```



å›¾ç‰‡æ¨¡ç³Šæ£€æµ‹(å…¨é‡)

```python
# coding=utf-8
# å¯¼å…¥ç›¸åº”çš„pythonåŒ…
# è°ƒç”¨ python3 dete_blur.py -i "/Users/wangguibin/Desktop/images/" -r "/Users/wangguibin/Desktop/resultImages" å³å¯ æ¡Œé¢ä¸Šç”Ÿæˆå›¾ç‰‡ç»“æœ

from imutils import paths
import argparse
import cv2
import os

def variance_of_laplacian(image):
    '''
    è®¡ç®—å›¾åƒçš„laplacianå“åº”çš„æ–¹å·®å€¼
    '''
    return cv2.Laplacian(image, cv2.CV_64F).var()

if __name__ == '__main__':
    # è®¾ç½®å‚æ•°
    ap = argparse.ArgumentParser()
    ap.add_argument("-i", "--images", required=True, help="è®¾ç½®è¾“å…¥å›¾ç‰‡çš„è·¯å¾„")
    ap.add_argument("-r", "--result_dir",required=True, help="è®¾ç½®è¾“å‡ºæ‰“åˆ†å›¾ç‰‡çš„è·¯å¾„")
    ap.add_argument("-t", "--threshold", type=float, default=100.0, help="è®¾ç½®æ¨¡ç³Šé˜ˆå€¼")
    args = vars(ap.parse_args())

    # éå†æ¯ä¸€å¼ å›¾ç‰‡
    count = 0
    resultDir = args["result_dir"]
    if not os.path.exists(resultDir):
        os.makedirs(resultDir)
    for imagePath in paths.list_images(args["images"]):
        count += 1
        # è¯»å–å›¾ç‰‡
        image = cv2.imread(imagePath)
        # å°†å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾ç‰‡
        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
        # è®¡ç®—ç°åº¦å›¾ç‰‡çš„æ–¹å·®
        fm = variance_of_laplacian(gray)
        text = "Not Blurry"

        # è®¾ç½®è¾“å‡ºçš„æ–‡å­— (è¿™ä¸ªæ–‡å­—å¥½åƒè®¾ç½®ä¸äº†ä¸­æ–‡ ä¼šä¹±ç ...)
        if fm < args["threshold"]:
            text = "Blurry"

        # æ˜¾ç¤ºç»“æœ
        cv2.putText(image, "{}: {:.2f}".format(text, fm), (30, 30), cv2.FONT_HERSHEY_SIMPLEX, 0.8, (0, 0, 255), 3)
        #æ¡Œé¢ä¸Šåˆ›å»ºä¸€ä¸ªç»“æœç›®å½•
        imageName = resultDir + "/%d.jpg" % count
        cv2.imwrite(imageName, image)
os.system('open ' + resultDir)
        
```



æŠŠå›¾ç‰‡å¤„ç†æˆæ¨¡ç³Š 

```python
import numpy as np
import cv2
from PIL import Image
import argparse

def motion_blur(image, degree=10, angle=20):
    image = np.array(image)

    # è¿™é‡Œç”Ÿæˆä»»æ„è§’åº¦çš„è¿åŠ¨æ¨¡ç³Škernelçš„çŸ©é˜µï¼Œ degreeè¶Šå¤§ï¼Œæ¨¡ç³Šç¨‹åº¦è¶Šé«˜
    M = cv2.getRotationMatrix2D((degree/2, degree/2), angle, 1)
    motion_blur_kernel = np.diag(np.ones(degree))
    motion_blur_kernel = cv2.warpAffine(motion_blur_kernel, M, (degree, degree))

    motion_blur_kernel = motion_blur_kernel / degree
    blurred = cv2.filter2D(image, -1, motion_blur_kernel)
    # convert to uint8
    cv2.normalize(blurred, blurred, 0, 255, cv2.NORM_MINMAX)
    blurred = np.array(blurred, dtype=np.uint8)
    return blurred


if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('-i','--images_path', required=True,help="è®¾ç½®è¾“å…¥å›¾ç‰‡çš„è·¯å¾„")
    parser.add_argument('-d','--dst_images_path', required=True,help="è®¾ç½®è¾“å…¥å›¾ç‰‡çš„è·¯å¾„")

    args = parser.parse_args()
    images_path = args.images_path
    dst_images_path = args.dst_images_path

    img = Image.open(images_path)
    blurImg = motion_blur(img,50,30)
    cv2.imwrite(dst_images_path, blurImg)
```



#### æŠŠè„šæœ¬å°è£…è°ƒç”¨

æˆ‘æŠŠè„šæœ¬æ”¾åœ¨æ ¹ç›®å½•çš„`MyShell`ç›®å½•ä¸‹,æˆ‘ä¸€äº›å¸¸ç”¨çš„è„šæœ¬éƒ½å­˜æ”¾åœ¨è¿™é‡Œ,æ–¹ä¾¿ç®¡ç†

ä»¥ä¸‹æ˜¯åˆ©ç”¨Macè‡ªåŠ¨æ“ä½œåœ¨è®¿è¾¾å¿«é€Ÿæ“ä½œé‡Œæ·»åŠ çš„ä¸€äº›èœå•é€‰é¡¹,è¿™æ ·æ›´ä¾¿äºè°ƒç”¨,çœå»è°ƒç”¨å‘½ä»¤æ‰‹åŠ¨è¾“å…¥è·¯å¾„åç­‰æ“ä½œ

è§†é¢‘æ‹†å¸§  

```bash
imageDIR=${1%/*}/resultDir
cd ~/MyShell
python3 video2frame.py -v $1 -i $imageDIR 
open $imageDIR
osascript -e "display notification \"${imageDIR}\" with title \"ğŸ“©æ”¶åˆ°ä¸€æ¡æ–°çš„é€šçŸ¥\" subtitle \"è§†é¢‘å·²å®Œæˆæ‹†å¸§,è¯·æŸ¥çœ‹~\""
```

å›¾ç‰‡åˆæˆè§†é¢‘

```bash
videoDIR=${1%/*}/img2video.mp4
cd ~/MyShell
python3 frame2video.py -f 30 -i "${1}/" -v $videoDIR 
osascript -e "display notification \"${videoDIR}\" with title \"ğŸ“©æ”¶åˆ°ä¸€æ¡æ–°çš„é€šçŸ¥\" subtitle \"è§†é¢‘å·²åˆæˆ,è¯·æŸ¥çœ‹~\""
```



å›¾ç‰‡æ¨¡ç³Šæ£€æµ‹(æŠ½æ£€)

```bash
resultImagesDIR=${1%/*}/resultImages
cd ~/MyShell
python3 blur_det.py  -i "${1}/" -r $resultImagesDIR 
open $resultImagesDIR
osascript -e "display notification \"${resultImagesDIR}\" with title \"ğŸ“©æ”¶åˆ°ä¸€æ¡æ–°çš„é€šçŸ¥\" subtitle \"å›¾ç‰‡å·²æ£€æµ‹å®Œæ¯•,è¯·æŸ¥çœ‹~\""
```



å›¾ç‰‡æ¨¡ç³Šæ£€æµ‹(å…¨é‡)

```bash
resultImagesDIR=${1%/*}/resultImages
cd ~/MyShell
python3 dete_blur.py  -i "${1}/" -r $resultImagesDIR 
open $resultImagesDIR
osascript -e "display notification \"${resultImagesDIR}\" with title \"ğŸ“©æ”¶åˆ°ä¸€æ¡æ–°çš„é€šçŸ¥\" subtitle \"å›¾ç‰‡å·²æ£€æµ‹å®Œæ¯•,è¯·æŸ¥çœ‹~\""
```



æŠŠå›¾ç‰‡æ¨¡ç³Šå¤„ç†

```bash
filename=${1##*/}
dstDIR=${1%/*}/${filename%.*}_blured.${1##*.} #æ‹¼æ¥æ¨¡ç³Šåçš„å›¾ç‰‡æ–‡ä»¶å
cd ~/MyShell
python3 blur.py -i $1 -d $dstDIR   
osascript -e "display notification \"${dstDIR}\" with title \"ğŸ“©æ”¶åˆ°ä¸€æ¡æ–°çš„é€šçŸ¥\" subtitle \"å›¾ç‰‡å·²æ¨¡ç³Šå¤„ç†,è¯·æŸ¥çœ‹~\""
```